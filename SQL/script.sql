-- MySQL Script generated by MySQL Workbench
-- Tue May 11 13:39:10 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema licitacion
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `licitacion` ;

-- -----------------------------------------------------
-- Schema licitacion
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `licitacion` DEFAULT CHARACTER SET utf8 ;
USE `licitacion` ;

-- -----------------------------------------------------
-- Table `licitacion`.`tbl_modosid`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_modosid` (
  `modosid` INT NOT NULL,
  `description` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`modosid`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_ids`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_ids` (
  `ids` INT NOT NULL AUTO_INCREMENT,
  `modosid` INT NOT NULL,
  `fecha_actualizacion` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ids`),
  INDEX `modosid_idx` (`modosid` ASC),
  CONSTRAINT `modosid`
    FOREIGN KEY (`modosid`)
    REFERENCES `licitacion`.`tbl_modosid` (`modosid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_type_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_type_code` (
  `code` INT NOT NULL,
  `nombre` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_subtype_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_subtype_code` (
  `code` INT NOT NULL,
  `nombre` VARCHAR(300) NOT NULL,
  `type_code` INT NOT NULL,
  PRIMARY KEY (`code`),
  INDEX `fk_tbl_subtype_code_tbl_type_code1_idx` (`type_code` ASC),
  CONSTRAINT `fk_tbl_subtype_code_tbl_type_code1`
    FOREIGN KEY (`type_code`)
    REFERENCES `licitacion`.`tbl_type_code` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_expedientes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_expedientes` (
  `expedientes` INT NOT NULL,
  `title` VARCHAR(2000) NOT NULL,
  `link` VARCHAR(2500) NOT NULL,
  `fecha_actualizacion` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `objeto_contrato` VARCHAR(2000) NOT NULL,
  `valor_estimado` DECIMAL(12,2) NULL,
  `presupuesto_sin_impuestos` DECIMAL(12,2) NULL,
  `presupuesto_con_impuestos` DECIMAL(12,2) NULL,
  `start_date` DATE NULL,
  `end_date` DATE NULL,
  `duracion` DECIMAL(17,0) NULL,
  `unitcode` VARCHAR(45) NULL,
  `typecode` INT NULL,
  `subtypecode` INT NULL,
  PRIMARY KEY (`expedientes`),
  INDEX `typecode_idx` (`typecode` ASC),
  INDEX `subtypecode_idx` (`subtypecode` ASC),
  CONSTRAINT `typecode`
    FOREIGN KEY (`typecode`)
    REFERENCES `licitacion`.`tbl_type_code` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `subtypecode`
    FOREIGN KEY (`subtypecode`)
    REFERENCES `licitacion`.`tbl_subtype_code` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_contract_folder_status_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_contract_folder_status_code` (
  `contract_folder_status_code` VARCHAR(50) NOT NULL,
  `description` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`contract_folder_status_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_ids_expedientes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_ids_expedientes` (
  `ids_expedientes` INT NOT NULL AUTO_INCREMENT,
  `ids` INT NOT NULL,
  `expediente` INT NOT NULL,
  `summary` VARCHAR(400) NOT NULL,
  `updated` TIMESTAMP NOT NULL,
  `fecha_actualizacion` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `estado` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ids_expedientes`),
  INDEX `ids_idx` (`ids` ASC),
  INDEX `expediente_idx` (`expediente` ASC),
  INDEX `estado_idx` (`estado` ASC),
  CONSTRAINT `ids`
    FOREIGN KEY (`ids`)
    REFERENCES `licitacion`.`tbl_ids` (`ids`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `expediente`
    FOREIGN KEY (`expediente`)
    REFERENCES `licitacion`.`tbl_expedientes` (`expedientes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `estado`
    FOREIGN KEY (`estado`)
    REFERENCES `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_dgpe`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_dgpe` (
  `dgpe` INT NOT NULL AUTO_INCREMENT,
  `nombre_tabla` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`dgpe`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_contracting_party_type_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_contracting_party_type_code` (
  `contracting_party_type_code` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`contracting_party_type_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_address_format_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_address_format_code` (
  `address_format_code` INT NOT NULL,
  `description` VARCHAR(250) NULL,
  PRIMARY KEY (`address_format_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_identification_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_identification_code` (
  `identification_code` VARCHAR(50) NOT NULL,
  `name` VARCHAR(150) NOT NULL,
  `numericcode` INT NOT NULL,
  PRIMARY KEY (`identification_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_cpv`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_cpv` (
  `code` INT NOT NULL,
  `nombre` VARCHAR(300) NOT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_expediente_cpv`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_expediente_cpv` (
  `code` INT NOT NULL,
  `expedientes` INT NOT NULL,
  INDEX `fk_tbl_expediente_cpv_tbl_cpv1_idx` (`code` ASC),
  INDEX `fk_tbl_expediente_cpv_tbl_expedientes1_idx` (`expedientes` ASC),
  CONSTRAINT `fk_tbl_expediente_cpv_tbl_cpv1`
    FOREIGN KEY (`code`)
    REFERENCES `licitacion`.`tbl_cpv` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tbl_expediente_cpv_tbl_expedientes1`
    FOREIGN KEY (`expedientes`)
    REFERENCES `licitacion`.`tbl_expedientes` (`expedientes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_tipo_pliego`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_tipo_pliego` (
  `id` INT NOT NULL,
  `tipo` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_pliegos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_pliegos` (
  `pliegos` INT NOT NULL AUTO_INCREMENT,
  `id` VARCHAR(200) NULL,
  `uri` VARCHAR(2500) NULL,
  `document_hash` VARCHAR(2500) NULL,
  `file_name` VARCHAR(2500) NULL,
  `fecha_actualizacion` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `expedientes` INT NOT NULL,
  `tipo_pliego` INT NOT NULL,
  PRIMARY KEY (`pliegos`),
  INDEX `fk_tbl_pliegos_tbl_expedientes1_idx` (`expedientes` ASC),
  INDEX `fk_tbl_pliegos_tbl_tipo_pliego1_idx` (`tipo_pliego` ASC),
  CONSTRAINT `fk_tbl_pliegos_tbl_expedientes1`
    FOREIGN KEY (`expedientes`)
    REFERENCES `licitacion`.`tbl_expedientes` (`expedientes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tbl_pliegos_tbl_tipo_pliego1`
    FOREIGN KEY (`tipo_pliego`)
    REFERENCES `licitacion`.`tbl_tipo_pliego` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_country_identification_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_country_identification_code` (
  `code` VARCHAR(3) NOT NULL,
  `nombre` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_country_subentity_code`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_country_subentity_code` (
  `code` VARCHAR(5) NOT NULL,
  `nombre` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licitacion`.`tbl_lugar_de_ejecucion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licitacion`.`tbl_lugar_de_ejecucion` (
  `lugar_de_ejecucion` INT NOT NULL AUTO_INCREMENT,
  `expedientes` INT NOT NULL,
  `country_identification_code` VARCHAR(3) NULL,
  `country_subentity_code` VARCHAR(5) NOT NULL,
  `pais` VARCHAR(100) NULL,
  `calle` VARCHAR(220) NULL,
  `codigo_postal` VARCHAR(32) NULL,
  `poblacion` VARCHAR(90) NULL,
  `fecha_actualizacion` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`lugar_de_ejecucion`),
  INDEX `fk_calle_tbl_country_identification_code1_idx` (`country_identification_code` ASC),
  INDEX `fk_calle_tbl_country_subentity_code1_idx` (`country_subentity_code` ASC),
  INDEX `fk_calle_tbl_expedientes1_idx` (`expedientes` ASC),
  CONSTRAINT `fk_calle_tbl_country_identification_code1`
    FOREIGN KEY (`country_identification_code`)
    REFERENCES `licitacion`.`tbl_country_identification_code` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_calle_tbl_country_subentity_code1`
    FOREIGN KEY (`country_subentity_code`)
    REFERENCES `licitacion`.`tbl_country_subentity_code` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_calle_tbl_expedientes1`
    FOREIGN KEY (`expedientes`)
    REFERENCES `licitacion`.`tbl_expedientes` (`expedientes`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_modosid`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_modosid` (`modosid`, `description`) VALUES (1, 'Automático');
INSERT INTO `licitacion`.`tbl_modosid` (`modosid`, `description`) VALUES (2, 'Manual');

COMMIT;


-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_type_code`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (1, 'Suministros');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (2, 'Servicios');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (3, 'Obras');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (21, 'Gestión de servicios');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (31, 'Concesión de obras públicas');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (40, 'Colaboración entre el sector público y el sector privado');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (7, 'Administrativo especial');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (8, 'Privado');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (50, 'Patrimonial');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (999, 'Otros');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (0, 'null');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (32, 'Concesión de obras');
INSERT INTO `licitacion`.`tbl_type_code` (`code`, `nombre`) VALUES (22, 'Concesión de servicios');

COMMIT;


-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_subtype_code`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_subtype_code` (`code`, `nombre`, `type_code`) VALUES (0, 'null', 0);

COMMIT;


-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_contract_folder_status_code`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`, `description`) VALUES ('PRE', 'Anuncio Previo');
INSERT INTO `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`, `description`) VALUES ('PUB', 'En plazo');
INSERT INTO `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`, `description`) VALUES ('EV', 'Pendiente de adjudicación');
INSERT INTO `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`, `description`) VALUES ('ADJ', 'Adjudicada');
INSERT INTO `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`, `description`) VALUES ('RES', 'Resuelta');
INSERT INTO `licitacion`.`tbl_contract_folder_status_code` (`contract_folder_status_code`, `description`) VALUES ('ANUL', 'Anulada');

COMMIT;


-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_contracting_party_type_code`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_contracting_party_type_code` (`contracting_party_type_code`, `description`) VALUES (1, 'Administración General del Estado');
INSERT INTO `licitacion`.`tbl_contracting_party_type_code` (`contracting_party_type_code`, `description`) VALUES (2, 'Comunidad Autónoma');
INSERT INTO `licitacion`.`tbl_contracting_party_type_code` (`contracting_party_type_code`, `description`) VALUES (3, 'Administración Local');
INSERT INTO `licitacion`.`tbl_contracting_party_type_code` (`contracting_party_type_code`, `description`) VALUES (4, 'Entidad de Derecho Público');
INSERT INTO `licitacion`.`tbl_contracting_party_type_code` (`contracting_party_type_code`, `description`) VALUES (5, 'Otras Entidades del Sector Público');

COMMIT;


-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_address_format_code`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_address_format_code` (`address_format_code`, `description`) VALUES (0, 'NULL');
INSERT INTO `licitacion`.`tbl_address_format_code` (`address_format_code`, `description`) VALUES (1, 'PRUEBA');

COMMIT;


-- -----------------------------------------------------
-- Data for table `licitacion`.`tbl_tipo_pliego`
-- -----------------------------------------------------
START TRANSACTION;
USE `licitacion`;
INSERT INTO `licitacion`.`tbl_tipo_pliego` (`id`, `tipo`) VALUES (1, 'Administrativo');
INSERT INTO `licitacion`.`tbl_tipo_pliego` (`id`, `tipo`) VALUES (2, 'Técnico');
INSERT INTO `licitacion`.`tbl_tipo_pliego` (`id`, `tipo`) VALUES (3, 'Adicional');

COMMIT;

